# =====================================================================
# å¿«é€Ÿå®éªŒé…ç½® - é’ˆå¯¹Colabç¯å¢ƒä¼˜åŒ–
# =====================================================================

experiment:
  name: rdt_fast_experiment
  output_dir: runs
  seed: 202501

numerics:
  linear_solver_tol: 1.0e-07
  cholesky_nugget: 1.0e-08
  logdet_method: cholesky
  pcg_max_iter: 500

geometry:
  mode: grid2d
  nx: 40
  ny: 40
  h: 5.0

prior:
  nu: 1.0
  kappa: 0.10
  sigma2: 0.30
  alpha: 2
  beta: 1.0e-06
  mu_prior_mean: 2.2
  mu_prior_std: 0.0

sensors:
  pool_fraction: 0.75
  pool_strategy: grid_subsample
  type_mix: [0.4, 0.4, 0.2]
  types:
    - name: inertial_profiler
      noise_std: 0.1
      cost_gbp: 10000.0
      footprint: avg3x3
    - name: photogrammetry
      noise_std: 0.25
      cost_gbp: 5000.0
      footprint: avg3x3
    - name: smartphone
      noise_std: 0.5
      cost_gbp: 500.0
      footprint: avg5x5

decision:
  tau_iri: 2.0
  L_TP_gbp: 5000.0
  L_FP_gbp: 8000.0
  L_FN_gbp: 40000.0
  L_TN_gbp: 0.0

# =====================================================================
# ğŸ”¥ é€‰æ‹©ç®—æ³•ä¼˜åŒ–ï¼ˆå…³é”®åŠ é€Ÿç‚¹ï¼‰
# =====================================================================
selection:
  methods:
    - greedy_mi        # å¿…è·‘
    - greedy_aopt      # ğŸ”¥ å¯ç”¨ä½†å¤§å¹…ä¼˜åŒ–
    - uniform          # å¿«é€ŸåŸºçº¿
    - random           # å¿«é€ŸåŸºçº¿

  budgets:
    - 10
    - 20
    - 40

  greedy_mi:
    lazy: true
    cost_normalized: true
    warmstart_enum: false
    batch_size: 64           # æ‰¹é‡è¯„ä¼°å¤§å°

  greedy_aopt:
    lazy: true
    trace_estimator: hutchpp
    hutchpp_probes: 5        # ğŸ”¥ å‡å°‘åˆ°5ï¼ˆåŸ10ï¼‰
    batch_size: 16           # ğŸ”¥ å‡å°‘åˆ°16ï¼ˆåŸ32ï¼‰
    max_candidates: 150      # ğŸ”¥ æ–°å¢ï¼šåªè¯„ä¼°150ä¸ªå€™é€‰
    early_stop_ratio: 0.15   # ğŸ”¥ æ–°å¢ï¼šå½“æœ€ä½³å¢ç›Š<åˆå§‹15%æ—¶åœæ­¢

# =====================================================================
# EVIè®¡ç®—ä¼˜åŒ–
# =====================================================================
evi:
  compute_for:
    - greedy_mi
  method: monte_carlo
  monte_carlo_samples: 500
  unscented_alpha: 1.0
  unscented_beta: 2.0
  unscented_kappa: 0.0

# =====================================================================
# CVä¼˜åŒ–
# =====================================================================
cv:
  scheme: spatial_block
  k_folds: 3
  buffer_width_multiplier: 1.5
  block_strategy: kmeans
  ensure_connected: true

# =====================================================================
# UQä¼˜åŒ–
# =====================================================================
uq:
  bootstrap_method: spatial_block
  bootstrap_samples: 500
  confidence_level: 0.95
  coverage_percentile: 90
  compute_crps: false

diagnostics:
  morans_i:
    permutations: 499
    weight_type: adjacency
  calibration:
    compute_coverage: true
    compute_msse: true

# =====================================================================
# ğŸ”¥ å¢å¼ºçš„å¯è§†åŒ–é…ç½®ï¼ˆä¸“å®¶å»ºè®®ï¼‰
# =====================================================================
plots:
  save_formats: [png, pdf]   # ğŸ”¥ æ¢å¤pdfï¼ˆè®ºæ–‡éœ€è¦ï¼‰
  dpi: 300                    # ğŸ”¥ æ¢å¤é«˜åˆ†è¾¨ç‡
  style: seaborn-v0_8-paper

  budget_curves:
    show_ci: true
    metrics:
      - expected_loss
      - rmse
      - coverage_90

  performance_profile:
    tau_max: 3.0

  critical_difference:
    alpha: 0.05
    test: nemenyi

  # ğŸ”¥ æ–°å¢ï¼šä¸“å®¶å»ºè®®çš„å›¾åƒ
  expert_plots:
    enable_all: true           # å¯ç”¨æ‰€æœ‰ä¸“å®¶å»ºè®®çš„å›¾

    marginal_efficiency:       # F2: å•ä½æˆæœ¬æ•ˆç‡æ›²çº¿
      enable: true
      show_cost_normalized: true

    type_composition:          # F3: ä¼ æ„Ÿå™¨ç±»å‹å †å 
      enable: true
      show_stacked: true

    mi_voi_correlation:        # F4: MI vs VoIç›¸å…³æ€§
      enable: true
      compute_r2: true

    calibration_plots:         # F5: æ ¡å‡†å›¾
      enable: true
      coverage_curve: true
      msse_distribution: true

    spatial_diagnostics:       # F6: ç©ºé—´è¯Šæ–­
      enable: true
      show_test_blocks: true

    ablation_study:            # F8: æ¶ˆèå®éªŒ
      enable: false            # æš‚ä¸å¯ç”¨ï¼ˆè€—æ—¶ï¼‰

    sensor_placement_map:      # F10: é€‰å€å¯è§†åŒ–
      enable: true
      show_budget_evolution: true

logging:
  level: INFO
  console: true
  file: true
  jsonl_metrics: true

acceptance:
  m1_grid_size: 1600
  m1_budgets: [10, 20, 40]
  m1_check_monotonic: true
  m1_check_diminishing: true
  m2_min_improvement_vs_random: 0.15
  m2_confidence_level: 0.95
  m3_small_instance_n: 200
  m3_small_instance_k: 8
  m3_max_suboptimality: 1.58
  m4_morans_alpha: 0.05
  m4_coverage_tolerance: 0.05
  m4_msse_tolerance: 0.2